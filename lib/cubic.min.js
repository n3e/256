var CUBE=function(b){function a(e,i,g){var d=e+16*i,h=((d<<16)&16711680)|((d<<8)&65280)|(d&255);
var f=new THREE.Mesh(new THREE.CubeGeometry(1,1,1),new THREE.MeshBasicMaterial({color:h}));
f.position=new THREE.Vector3(e,i,g);return f}this.c=new THREE.Object3D();
for(var c=0;c<256;++c){this.c.add(a(Math.floor(c/16),c%16,0));this.c.add(a(Math.floor(c/16),c%16,15));
this.c.add(a(0,Math.floor(c/16),c%16));this.c.add(a(15,Math.floor(c/16),c%16));
this.c.add(a(Math.floor(c/16),0,c%16));this.c.add(a(Math.floor(c/16),15,c%16))
}this.c.position=new THREE.Vector3(0,2,0);this.e=new THREE.PerspectiveCamera(45,b.width/b.height,1.1,300);
this.e.lookAt(new THREE.Vector3(-15,-15,-15));this.e.position=new THREE.Vector3(30,30,30);
this.s=new THREE.Scene();this.s.add(this.e);this.s.add(this.c);this.w=new THREE.WebGLRenderer(
{antialias:true,preserveDrawingBuffer:true,clearColor:b.background,clearAlpha:1});
this.w.setSize(b.width,b.height);b.wrapper.appendChild(this.w.domElement);
this.f=1;this.___=function(){requestAnimationFrame(this.___.bind(this));
this.w.render(this.s,this.e);this.c.rotation.y+=this.f*b.speed;if(this.c.rotation.y>+Math.PI/3){this.f=-1
}if(this.c.rotation.y<-Math.PI/3){this.f=+1}};this.___();this.snapshot=function(){return window.open(this.w.domElement.toDataURL())
}};
